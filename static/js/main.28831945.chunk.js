(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,function(e,t,n){e.exports=n.p+"static/media/logo.06e73328.svg"},,function(e,t,n){e.exports=n(16)},,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),c=n(1),r=n.n(c),o=(n(14),n(3)),s=n.n(o);n(15);const i=["GET"];function u(e,t,n,a){let l;a&&(l=JSON.stringify(a));const c="http://127.0.0.1:8000/api/".concat(t),r=new XMLHttpRequest;if(r.responseType="json",r.open(e,c),r.setRequestHeader("content-type","application/json"),!i.includes(e)){const e=function(e){let t=null;if(document.cookie&&""!==document.cookie){const n=document.cookie.split(";");for(let a=0;a<n.length;a++){const l=n[a].trim();if(l.substring(0,e.length+1)===e+"="){t=decodeURIComponent(l.substring(e.length+1));break}}}return t}("csrftoken");e&&(r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("X-CSRFToken",e))}r.onload=function(){if(403===r.status){r.response.detail==="Authentication credentials were not provided."&&-1===window.location.href.indexOf("login")&&(window.location.href="/login?showLoginRequired=true")}n(r.response,r.status)},r.onerror=function(){n({message:"An error ocurred!"},r.status)},r.send(l)}function m(e,t,n){let a="tweet/";e&&(a="tweet/?username=".concat(e)),null!==n&&void 0!==n&&(a="tweet/?"+n.split("?")[1]),u("GET",a,t)}function d(e,t){let n="tweet/feed/";null!==t&&void 0!==t&&(n="tweet/?"+t.split("?")[1]),u("GET",n,e)}function f(e){const{tweet:t,action:n,didPerformAction:a}=e,c=t.likes?t.likes:0,r=e.className?e.className:"btn btn-primary btn-sm",o=n.display?n.display:"action",s="like"===n.display?"".concat(c," ").concat(o):o,i=(e,t)=>{200!==t&&201!==t||!a||a(e,t)};return l.a.createElement("button",{className:r,onClick:e=>{e.preventDefault(),function(e,t,n){u("POST","tweet/action/",n,{id:e,action:t})}(t.id,n.type,i)}},s)}function w(e){const{author:t,hideLink:n}=e,a=l.a.createElement("span",{className:"mx-1 px-3 py-2 rounded-circle bg-dark text-white"},t.username[0]);return!0===n?a:l.a.createElement(p,{username:t.username},a)}function p(e){const{username:t}=e;return l.a.createElement("span",{className:"pointer",onClick:e=>{e.preventDefault(),window.location.href="/profile/".concat(t)}},e.children)}function E(e){const{author:t,includeFullName:n,hideLink:a}=e,c=!0===n?"".concat(t.first_name," ").concat(t.last_name," "):null;return l.a.createElement(l.a.Fragment,null,c,!0===a?"@".concat(t.username):l.a.createElement(p,{username:t.username},"@",t.username))}var b=n(4),g=n.n(b);function h(e){return l.a.createElement("span",{className:e.className},g()(e.children).format("0a"))}function N(e){const{user:t,didFollowToggle:n,profileLoading:a}=e;let c=t&&t.is_following?"Unfollow":"Follow";c=a?"Loading...":c;return t?l.a.createElement("div",{className:"mx-2 my-2"},l.a.createElement(w,{author:t,hideLink:!0}),l.a.createElement("p",null,l.a.createElement(h,null,t.follower_count)," ",1===t.follower_count||0===t.follower_count?"Follower":"Followers"),l.a.createElement("p",null,l.a.createElement(h,null,t.following_count)," Following"),l.a.createElement("p",null,t.location),l.a.createElement("p",null,t.bio),l.a.createElement("p",null,l.a.createElement(E,{author:t,includeFullName:!0,hideLink:!0})),l.a.createElement("button",{className:"btn btn-primary",onClick:e=>{e.preventDefault(),n&&!a&&n(c)}},c)):null}function y(e){const{tweet:t}=e;return t.parent?l.a.createElement(v,{isRetweet:!0,reTweeter:e.reTweeter,hideAction:!0,className:"",tweet:t.parent}):null}function v(e){const{tweet:t,didRetweet:n,hideAction:c,isRetweet:r,reTweeter:o}=e,[s,i]=Object(a.useState)(e.tweet?e.tweet:null);let u=e.className?e.className:"col-10 mx-auto col-md-6";u=!0===r?"".concat(u," p-2 border rounded"):u;var m=window.location.pathname.match(/(?<tweetid>\d+)/),d=m?m.groups.tweetid:-1;const p="".concat(t.id)==="".concat(d),b=(e,t)=>{200===t?i(e):201===t&&n&&n(e)};return l.a.createElement("div",{className:u},!0===r&&l.a.createElement("div",{className:"mb-2"},l.a.createElement("span",{className:"small text-muted"},"Retweet via ",l.a.createElement(E,{author:o}))),l.a.createElement("div",{className:"d-flex"},l.a.createElement("div",{className:""},l.a.createElement(w,{author:t.author})),l.a.createElement("div",{className:"col-11"},l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement(E,{author:t.author,includeFullName:!0})),l.a.createElement("p",null,t.content),l.a.createElement(y,{tweet:t,reTweeter:t.author}),l.a.createElement("div",{className:"btn btn-group px-0"},s&&!0!==c&&l.a.createElement(l.a.Fragment,null,l.a.createElement(f,{tweet:s,didPerformAction:b,action:{type:"like",display:"like"}}),l.a.createElement(f,{tweet:s,didPerformAction:b,action:{type:"unlike",display:"unlike"}}),l.a.createElement(f,{tweet:s,didPerformAction:b,action:{type:"retweet",display:"retweet"}})),!0===p?null:l.a.createElement("button",{className:"btn btn-outline-primary",onClick:e=>{e.preventDefault(),window.location.href="/".concat(t.id)}},"View"))))))}function k(e){const[t,n]=Object(a.useState)([]),[c,r]=Object(a.useState)([]),[o,s]=Object(a.useState)(null),[i,u]=Object(a.useState)(!1);Object(a.useEffect)(()=>{let n=[...e.newTweets].concat(t);n.length!==c.length&&r(n)},[t,e.newTweets,c]),Object(a.useEffect)(()=>{if(!1===i){const t=(e,t)=>{200===t?(s(e.next),n(e.results),u(!0)):alert("There was an error with this")};m(e.username,t)}},[n,i,u,e.username]);const d=e=>{const a=[...t];a.unshift(e),n(a);const l=[...c];l.unshift(e),r(l)};return l.a.createElement(l.a.Fragment,null," ",c.map((e,t)=>l.a.createElement(v,{tweet:e,didRetweet:d,className:"my-5 py-5 border bg-white text-dark",key:"".concat(t,"-{item.id}")})),null!==o&&l.a.createElement("button",{onClick:t=>{if(t.preventDefault(),null!==o){const t=(e,t)=>{if(200===t){s(e.next);const t=[...c].concat(e.results);n(t),r(t)}else alert("There was an error with this")};m(e.username,t,o)}},className:"btn btn-outline-primary"},"Next Page"))}function T(e){const t=l.a.createRef(),{didTweet:n}=e,a=(e,t)=>{201===t?n(e):(console.log(e,t),alert("An error ocurred,please try again!"))};return l.a.createElement("div",{className:e.className},l.a.createElement("form",{onSubmit:e=>{e.preventDefault(),function(e,t){u("POST","tweet/create/",t,{content:e})}(t.current.value,a),t.current.value=""}},l.a.createElement("textarea",{ref:t,required:!0,name:"tweet",className:"form-control"}),l.a.createElement("button",{type:"submit",className:"btn btn-primary my-3"},"Tweet")))}function O(e){const[t,n]=Object(a.useState)([]),[c,r]=Object(a.useState)([]),[o,s]=Object(a.useState)(null),[i,u]=Object(a.useState)(!1);Object(a.useEffect)(()=>{let e=t;e.length!==c.length&&r(e)},[t,e.newTweets,c]),Object(a.useEffect)(()=>{if(!1===i){d((e,t)=>{200===t&&(s(e.next),n(e.results),u(!0))})}},[n,i,u,e.username]);const m=e=>{const a=[...t];a.unshift(e),n(a);const l=[...c];l.unshift(e),r(l)};return l.a.createElement(l.a.Fragment,null," ",c.map((e,t)=>l.a.createElement(v,{tweet:e,didRetweet:m,className:"my-5 py-5 border bg-white text-dark",key:"".concat(t,"-{item.id}")})),null!==o&&l.a.createElement("button",{onClick:e=>{e.preventDefault(),null!==o&&d((e,t)=>{if(200===t){s(e.next);const t=[...c].concat(e.results);n(t),r(t)}},o)},className:"btn btn-outline-primary"},"Next Page"))}function j(e){const[t,n]=Object(a.useState)([]),c="false"!==e.canTweet;return l.a.createElement("div",{div:!0,className:e.className},!0===c&&l.a.createElement(T,{didTweet:e=>{let t=[...e];t.unshift(e),n(t)},className:"col-12 mb-3"}),l.a.createElement(k,Object.assign({newTweets:t},e)))}var S=function(){return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement("img",{src:s.a,className:"App-logo",alt:"logo"}),l.a.createElement("p",null,"Edit ",l.a.createElement("code",null,"src/App.js")," and save to reload."),l.a.createElement("div",null,l.a.createElement(j,null)),l.a.createElement("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer"},"Learn React")))};var R=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then(t=>{let{getCLS:n,getFID:a,getFCP:l,getLCP:c,getTTFB:r}=t;n(e),a(e),l(e),c(e),r(e)})};const x=document.getElementById("root");if(x){r.a.createRoot(x).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(S,null)))}const F=l.a.createElement,L=document.getElementById("tweetme2");if(L){r.a.createRoot(L).render(F(j,L.dataset))}const A=document.getElementById("tweetme2-feed");if(A){r.a.createRoot(A).render(F(function(e){const t="false"!==e.canTweet;return l.a.createElement("div",{div:!0,className:e.className},!0===t&&l.a.createElement(T,{didTweet:e=>{console.log("here there")},className:"col-12 mb-3"}),l.a.createElement(O,e))},A.dataset))}const C=document.getElementById("tweetme-2-detail");if(C){r.a.createRoot(C).render(F(function(e){const{tweetId:t}=e,[n,c]=Object(a.useState)(!1),[r,o]=Object(a.useState)(null),s=(e,t)=>{200===t?o(e):alert("There was an error finding your tweet.")};return Object(a.useEffect)(()=>{!1===n&&(function(e,t){u("GET","tweet/".concat(e),t)}(t,s),c(!0))},[n,c,t]),null===r?null:l.a.createElement(v,{tweet:r,className:e.className})},C.dataset))}const P=document.getElementById("tweetme-2-profile-badge");if(P){r.a.createRoot(P).render(F(function(e){const{username:t}=e,[n,c]=Object(a.useState)(!1),[r,o]=Object(a.useState)(null),[s,i]=Object(a.useState)(!1),m=(e,t)=>{200===t&&o(e)};return Object(a.useEffect)(()=>{!1===n&&(function(e,t){u("GET","profile/".concat(e),t)}(t,m),c(!0))},[n,c,t]),!1===n?"Loading ...":r?l.a.createElement(N,{user:r,didFollowToggle:e=>{!function(e,t,n){const a={action:"".concat(t&&t).toLowerCase()};u("POST","profile/".concat(e,"/follow/"),n,a)}(t,e,(e,t)=>{200===t&&o(e),i(!1)}),i(!0)},profileLoading:s}):null},P.dataset))}R()}],[[5,1,2]]]);
//# sourceMappingURL=main.28831945.chunk.js.map