{"ast":null,"code":"import React,{useEffect,useState}from'react';import{loadTweets}from'../lookup';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function TweetComponent(props){const textAreaRef=/*#__PURE__*/React.createRef();const[newTweets,setNewTweets]=useState([]);const handleSubmit=event=>{event.preventDefault();const newVal=textAreaRef.current.value;let tempNewTweets=[...newTweets];tempNewTweets.unshift({content:newVal,likes:0,id:13432});setNewTweets(tempNewTweets);textAreaRef.current.value='';};return/*#__PURE__*/_jsxs(\"div\",{className:props.className,children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"textarea\",{ref:textAreaRef,required:true,name:\"tweet\",className:\"form-control\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary my-3\",children:\"Tweet\"})]})}),/*#__PURE__*/_jsx(TweetLists,{newTweets:newTweets})]});}export function TweetLists(props){const[tweetsInit,setTweetsInit]=useState([]);//[props.newTweets? props.newTweets:[]])\nconst[tweets,setTweets]=useState([]);useEffect(()=>{let final=[...props.newTweets].concat(tweetsInit);if(final.length!==tweets.length){setTweets(final);}},[tweetsInit,props.newTweets,tweets]);useEffect(()=>{const myCallback=(response,status)=>{if(status===200){//let finalTweetInit=[...response].concat(tweetsInit)\nsetTweetsInit(response);}else{alert('There was an error with this');}};loadTweets(myCallback);},[]);return tweets.map((item,index)=>{return/*#__PURE__*/_jsx(Tweet,{tweet:item,className:\"my-5 py-5 border bg-white text-dark\"},\"\".concat(index,\"-{item.id}\"));});}export function ActionBtn(props){const{tweet,action}=props;const[likes,setLikes]=useState(tweet.likes?tweet.likes:0);const[userLike,setUserLike]=useState(tweet.userLike===true?true:false);const className=props.className?props.className:'btn btn-primary btn-sm';const actionDisplay=action.display?action.display:'action';const display=action.display===\"like\"?\"\".concat(likes,\" \").concat(actionDisplay):actionDisplay;const handleClick=event=>{if(action.type==='like'){if(userLike===true){setUserLike(false);setLikes(likes-1);}else{setUserLike(true);setLikes(likes+1);}}};return/*#__PURE__*/_jsx(\"button\",{className:className,onClick:handleClick,children:display});}export function Tweet(props){const{tweet}=props;const className=props.className?props.className:'col-10 mx-auto col-md-6';return/*#__PURE__*/_jsxs(\"div\",{className:className,children:[/*#__PURE__*/_jsxs(\"p\",{children:[tweet.id,\" - \",tweet.content]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn btn-group\",children:[/*#__PURE__*/_jsx(ActionBtn,{tweet:tweet,action:{type:\"like\",display:\"like\"}}),/*#__PURE__*/_jsx(ActionBtn,{tweet:tweet,action:{type:\"unlike\",display:\"unlike\"}}),/*#__PURE__*/_jsx(ActionBtn,{tweet:tweet,action:{type:\"retweet\",display:\"retweet\"}})]})]});}","map":{"version":3,"names":["React","useEffect","useState","loadTweets","jsx","_jsx","jsxs","_jsxs","TweetComponent","props","textAreaRef","createRef","newTweets","setNewTweets","handleSubmit","event","preventDefault","newVal","current","value","tempNewTweets","unshift","content","likes","id","className","children","onSubmit","ref","required","name","type","TweetLists","tweetsInit","setTweetsInit","tweets","setTweets","final","concat","length","myCallback","response","status","alert","map","item","index","Tweet","tweet","ActionBtn","action","setLikes","userLike","setUserLike","actionDisplay","display","handleClick","onClick"],"sources":["C:/Users/mskar/PycharmProjects/TwitterLikeApp/tweetme2-web/src/tweets/components.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { loadTweets } from '../lookup';\r\n\r\n\r\nexport function TweetComponent(props) {\r\n  const textAreaRef = React.createRef()\r\n  const [newTweets,setNewTweets]=useState([])\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault()\r\n    const newVal = textAreaRef.current.value\r\n    let tempNewTweets = [...newTweets]\r\n    tempNewTweets.unshift({\r\n      content: newVal,\r\n      likes: 0,\r\n      id:13432\r\n    })\r\n    setNewTweets(tempNewTweets)\r\n    textAreaRef.current.value=''\r\n  }\r\n  return <div className={props.className}>\r\n    <div className='col-12 mb-3'> \r\n    <form onSubmit={handleSubmit}>\r\n      <textarea ref={textAreaRef} required={true} name='tweet' className='form-control'></textarea>\r\n      <button type='submit' className='btn btn-primary my-3'>Tweet</button>\r\n    </form>\r\n    </div>\r\n    <TweetLists newTweets={newTweets } />\r\n  </div>\r\n}\r\n\r\n  \r\n  export function TweetLists(props) {\r\n    const [tweetsInit, setTweetsInit] = useState([])//[props.newTweets? props.newTweets:[]])\r\n    const [tweets,setTweets] =useState([])\r\n    useEffect(() => {\r\n      let final = [...props.newTweets].concat(tweetsInit)\r\n      if (final.length !== tweets.length) {\r\n        setTweets(final)\r\n      }\r\n    },[tweetsInit,props.newTweets,tweets])\r\n    \r\n    useEffect(() => {\r\n      const myCallback = (response, status) => {\r\n        if (status === 200) {\r\n          //let finalTweetInit=[...response].concat(tweetsInit)\r\n          setTweetsInit(response) \r\n        }\r\n        else {\r\n          alert('There was an error with this')\r\n        }\r\n      }\r\n      loadTweets(myCallback)\r\n    }, [])\r\n    return tweets.map((item, index) => {\r\n      return <Tweet tweet={item} className='my-5 py-5 border bg-white text-dark' key={`${index}-{item.id}`} />\r\n    })\r\n  }\r\n\r\nexport function ActionBtn(props) {\r\n  const { tweet, action } = props;\r\n  const [likes, setLikes] = useState(tweet.likes ? tweet.likes : 0)\r\n  const [userLike,setUserLike]=useState(tweet.userLike === true?true:false)\r\n  const className = props.className ? props.className : 'btn btn-primary btn-sm';\r\n  const actionDisplay = action.display ? action.display : 'action'\r\n  const display = action.display === \"like\" ? `${likes} ${actionDisplay}` : actionDisplay;\r\n  const handleClick = (event) => {\r\n    if (action.type === 'like') {\r\n      if (userLike === true) {\r\n        setUserLike(false) \r\n        setLikes(likes-1)\r\n      }\r\n      else {\r\n        setUserLike(true) \r\n        setLikes(likes+1)\r\n      }\r\n    }    \r\n  }  \r\n    return <button className={className} onClick={handleClick}>{ display}</button>\r\n  }\r\n  \r\n  \r\n export function Tweet(props) {\r\n    const {tweet} = props\r\n    const className = props.className ? props.className : 'col-10 mx-auto col-md-6'\r\n    return <div className={className}>\r\n      <p>\r\n        {tweet.id} - {tweet.content}\r\n      </p>\r\n      <div className='btn btn-group'>\r\n        <ActionBtn tweet={tweet} action={{ type: \"like\",display:\"like\" }} />\r\n        <ActionBtn tweet={tweet} action={{ type: \"unlike\", display: \"unlike\" }} />\r\n        <ActionBtn tweet={tweet} action={{ type: \"retweet\",display:\"retweet\" }} />\r\n        \r\n        </div>\r\n    </div>\r\n  }"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}